<div class="settings">
  <h1>Settings</h1>

  @if (loading()) {
    <p>Loading...</p>
  } @else {
    <!-- Account Info -->
    <div class="settings-card">
      <h2>Account</h2>
      <p><strong>Name:</strong> {{ profile()?.firstName }} {{ profile()?.lastName }}</p>
      <p><strong>Email:</strong> {{ profile()?.email }}</p>
      <p><strong>Username:</strong> {{ profile()?.username }}</p>
      <button (click)="openKeycloakAccount()">Edit in Keycloak</button>
    </div>

    <!-- Data Export -->
    <div class="settings-card">
      <h2>Data</h2>
      <button (click)="exportData()" [disabled]="exporting()">
        {{ exporting() ? 'Exporting...' : 'Export My Data' }}
      </button>
    </div>

    <!-- Logout -->
    <div class="settings-card">
      <h2>Session</h2>
      <button (click)="logout()">Logout</button>
    </div>
  }
</div>
